function formValidation(e){var t={};return e&&e.find(".form_item").each(function(){var e=$(this);""!=e.val()?"email"==e.attr("type")&&(/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/.test(jQuery.trim(e.val()))||(t[e.attr("id")]="not_email")):t[e.attr("id")]="empty"}),t}function showErrors(e,t){var i="";for(var a in t){var n=e.find($("#"+a)),r=n.attr("placeholder");n.addClass("error"),"empty"==t[a]?i+='<div class="error">Field '+r+" is required</div>":i+='<div class="error">You entered an invalid email</div>'}e.find(".error_block").length>0?e.find(".error_block").html(i):e.append('<div class="error_block">'+i+"</div>")}!function(e){"use strict";function t(e){e.css({"margin-top":"-"+parseInt(e.height()/2,0)+"px"}).fadeIn()}function i(){t(e(".itemwrap > li > div")),t(e("#thumbs")),t(e("#clock"))}e.fn.clearDefault=function(){return this.each(function(){e(this).val()})};var a=e("#timer-gallery-packery");e(a).packery({percentPosition:!0}),e("body").on("click",".tabsnav__item",function(){e(a).packery({percentPosition:!0})}),jQuery(window).on("load",function(){t(e(".itemwrap > li > div")),t(e("#thumbs")),t(e("#clock"))}),jQuery(document).ready(function(e){e(".show_toggle a").on("click",function(){return e("body").toggleClass("menu_show"),!1}),e(".form_submit").on("click",function(){var t=e(this).parents("form");t.find(".form_item").removeClass("error"),t.find(".error_block").remove();var i,a,n=formValidation(t);return Object.keys(n).length>0?showErrors(t,n):"contacts_form"==t.attr("id")?(i={name:e("input[name=name]").val(),email:e("input[name=email]").val(),message:e("input[name=message]").val()},jQuery.post("contacts.php",i,function(i){"error"==i.type?a='<div class="error_block">'+i.text+"</div>":(a='<div class="success">'+i.text+"</div>",e("#contacts_form .form_item").val("")),t.find(".form_row").slideUp(),t.find("#contact_results").hide().html(a).slideDown()},"json")):(i={subscribe_email:e("input[name=subscribe_email]").val()},jQuery.post("subscribe.php",i,function(i){a='<div class="success">'+i.text+"</div>",e("#contacts_form .form_item").val(""),t.find(".form_inner").slideUp(),t.find("#form_results").hide().html(a).slideDown()},"json")),!1}),e(".side-page").on("click",function(){var t=e(this).attr("id");e(".main-menu li").removeClass("active"),e('.main-menu li a[data-page="'+t+'"]').parent().addClass("active"),e(".side-page").removeClass("active").removeClass("went-left").removeClass("went-right"),e(this).prev().addClass("side-left").addClass("went-left"),e(this).next().addClass("side-right").addClass("went-right"),e(this).addClass("active")}),e(".main-menu a:not(.home-link)").on("click",function(){e("#clock").removeClass("active"),e(".mainarea-content").addClass("active"),e(".close").addClass("active");var t=e(this).attr("data-page");e(".main-menu li").removeClass("active"),e(this).parent().addClass("active"),e(".mainarea-content > div").removeClass("active").removeClass("went-left").removeClass("went-right"),e("#"+t).prev().addClass("side-left").addClass("went-left"),e("#"+t).next().addClass("side-right").addClass("went-right"),e("#"+t).addClass("active")}),e(".close").on("click",function(t){t.preventDefault(),e("#clock").addClass("active"),e(".main-menu li").removeClass("active"),e(".close").removeClass("active"),e(".mainarea-content").removeClass("active")}),e(".home-link").on("click",function(t){t.preventDefault(),e("#clock").addClass("active"),e(".main-menu li").removeClass("active"),e(".close").removeClass("active"),e(".mainarea-content").removeClass("active"),e(".home-link").parent().addClass("active")}),e('input[type="text"]').clearDefault(),e("#tweet_list").cycle({fx:"custom",cssBefore:{top:50,height:100,opacity:0,display:"block"},animIn:{top:0,opacity:1},animOut:{opacity:0,top:-50},cssAfter:{zIndex:0,display:"none"},speed:1750,sync:!1,easeIn:"easeOutBack",easeOut:"easeInBack"})});var n=!1;e(window).resize(function(){!1!==n&&clearTimeout(n),n=setTimeout(function(){i()},200)})}(jQuery);var initPhotoSwipeFromDOM=function(e){for(var t=function(e){for(var t,i,a,n,r=e.childNodes,s=r.length,o=[],l=0;l<s;l++)1===(t=r[l]).nodeType&&(a=(i=t.children[0]).getAttribute("data-size").split("x"),n={src:i.getAttribute("href"),w:parseInt(a[0],10),h:parseInt(a[1],10)},t.children.length>1&&(n.title=t.children[1].innerHTML),i.children.length>0&&(n.msrc=i.children[0].getAttribute("src")),n.el=t,o.push(n));return o},i=function e(t,i){return t&&(i(t)?t:e(t.parentNode,i))},a=function(e,i,a,n){var r,s,o=document.querySelectorAll(".pswp")[0];if(s=t(i),r={galleryUID:i.getAttribute("data-pswp-uid"),getThumbBoundsFn:function(e){var t=s[e].el.getElementsByTagName("img")[0],i=window.pageYOffset||document.documentElement.scrollTop,a=t.getBoundingClientRect();return{x:a.left,y:a.top+i,w:a.width}}},n)if(r.galleryPIDs){for(var l=0;l<s.length;l++)if(s[l].pid==e){r.index=l;break}}else r.index=parseInt(e,10)-1;else r.index=parseInt(e,10);isNaN(r.index)||(a&&(r.showAnimationDuration=0),new PhotoSwipe(o,PhotoSwipeUI_Default,s,r).init())},n=document.querySelectorAll(e),r=0,s=n.length;r<s;r++)n[r].setAttribute("data-pswp-uid",r+1),n[r].onclick=function(e){(e=e||window.event).preventDefault?e.preventDefault():e.returnValue=!1;var t=e.target||e.srcElement,n=i(t,function(e){return e.tagName&&"FIGURE"===e.tagName.toUpperCase()});if(n){for(var r,s=n.parentNode,o=n.parentNode.childNodes,l=o.length,c=0,d=0;d<l;d++)if(1===o[d].nodeType){if(o[d]===n){r=c;break}c++}return r>=0&&a(r,s),!1}};var o=function(){var e=window.location.hash.substring(1),t={};if(e.length<5)return t;for(var i=e.split("&"),a=0;a<i.length;a++)if(i[a]){var n=i[a].split("=");n.length<2||(t[n[0]]=n[1])}return t.gid&&(t.gid=parseInt(t.gid,10)),t}();o.pid&&o.gid&&a(o.pid,n[o.gid-1],!0,!0)};initPhotoSwipeFromDOM(".timer-gallery");